# todo

- closures
  - detect references to the same closed over variable and re-use it
  - general tidy up
  - sort out local variables
  - what about blocks? clox uses a special OP_CLOSE_UPVALUE opcode
- wrap the program in a implicit function and remove globals
- clean up runtime errors in the vm
- coroutines?
